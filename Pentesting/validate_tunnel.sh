#!/bin/bash

TARGET="kertu.org"

echo "Testing for open tunnels on $TARGET..."

# Menu wyboru testu
echo "Choose an option for tunnel validation:"
echo "1) Basic Scan (Check for open SSH and VPN ports)"
echo "2) Detailed Scan (Identify services and configuration details)"
read -p "Enter your choice (1 or 2): " CHOICE

case $CHOICE in
    1)
        echo "Performing basic scan for SSH and VPN..."
        # Podstawowe sprawdzenie portów 22 (SSH) i 1194 (VPN)
        nmap -p 22,1194 $TARGET
        ;;
    2)
        echo "Performing detailed scan for tunnels..."
        # Szczegółowe sprawdzenie portów z informacją o usługach
        nmap -p 22,1194 --script=ssh2-enum-algos,ssh-hostkey,openvpn $TARGET
        ;;
    *)
        echo "Invalid choice. Exiting."
        exit 1
        ;;
esac

echo "Tunnel validation completed."